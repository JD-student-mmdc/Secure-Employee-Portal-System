<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Secure Employee Portal</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        :root {
            --primary: #2c3e50;
            --secondary: #3498db;
            --accent: #e74c3c;
            --light: #ecf0f1;
            --dark: #2c3e50;
            --success: #2ecc71;
            --warning: #f39c12;
            --danger: #e74c3c;
        }

        body {
            background: linear-gradient(135deg, #1a2a3a, #2c3e50);
            color: var(--light);
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header Styles */
        header {
            background-color: rgba(44, 62, 80, 0.95);
            padding: 15px 0;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .logo i {
            font-size: 28px;
            color: var(--secondary);
        }

        .logo h1 {
            font-size: 24px;
            font-weight: 600;
        }

        nav ul {
            display: flex;
            list-style: none;
            gap: 25px;
        }

        nav a {
            color: var(--light);
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s;
            padding: 8px 12px;
            border-radius: 4px;
        }

        nav a:hover, nav a.active {
            color: var(--secondary);
            background-color: rgba(255, 255, 255, 0.1);
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: var(--secondary);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white;
        }

        /* Login Form Styles */
        .login-container {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 80vh;
            padding: 40px 20px;
        }

        .login-box {
            background-color: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 10px;
            padding: 40px;
            width: 100%;
            max-width: 450px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        }

        .login-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .login-header h2 {
            font-size: 28px;
            margin-bottom: 10px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
        }

        .form-control {
            width: 100%;
            padding: 12px 15px;
            border: none;
            border-radius: 6px;
            background-color: rgba(255, 255, 255, 0.15);
            color: var(--light);
            font-size: 16px;
            transition: background-color 0.3s;
        }

        .form-control:focus {
            outline: none;
            background-color: rgba(255, 255, 255, 0.25);
        }

        .btn {
            display: block;
            width: 100%;
            padding: 12px;
            border: none;
            border-radius: 6px;
            background-color: var(--secondary);
            color: white;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .btn:hover {
            background-color: #2980b9;
        }

        .btn-success {
            background-color: var(--success);
        }

        .btn-success:hover {
            background-color: #27ae60;
        }

        .mfa-section {
            margin-top: 20px;
            padding: 15px;
            background-color: rgba(52, 152, 219, 0.2);
            border-radius: 6px;
            text-align: center;
        }

        .mfa-qr {
            width: 200px;
            height: 200px;
            background: white;
            margin: 15px auto;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            flex-direction: column;
            padding: 10px;
        }

        .mfa-qr span {
            color: #333;
            font-size: 14px;
            text-align: center;
        }

        /* Dashboard Styles */
        .dashboard {
            display: none;
            padding: 30px 0;
        }

        .welcome-banner {
            background: linear-gradient(135deg, var(--secondary), #2980b9);
            border-radius: 10px;
            padding: 30px;
            margin-bottom: 30px;
        }

        .welcome-text h2 {
            font-size: 28px;
            margin-bottom: 10px;
        }

        .stats-cards {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 20px;
            display: flex;
            flex-direction: column;
            transition: transform 0.3s;
        }

        .stat-card:hover {
            transform: translateY(-5px);
        }

        .stat-card i {
            font-size: 24px;
            margin-bottom: 15px;
            color: var(--secondary);
        }

        .stat-card h3 {
            font-size: 14px;
            color: #bdc3c7;
            margin-bottom: 10px;
        }

        .stat-card .value {
            font-size: 28px;
            font-weight: 700;
        }

        .dashboard-section {
            margin-bottom: 40px;
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .section-header h2 {
            font-size: 22px;
        }

        .section-header .btn {
            width: auto;
            padding: 8px 16px;
        }

        .tasks-list, .documents-list, .salary-list, .attendance-list {
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            overflow: hidden;
        }

        .task-item, .document-item, .salary-item, .attendance-item {
            padding: 15px 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .task-item:last-child, .document-item:last-child, .salary-item:last-child, .attendance-item:last-child {
            border-bottom: none;
        }

        .task-info h4, .document-info h4, .salary-info h4, .attendance-info h4 {
            font-size: 16px;
            margin-bottom: 5px;
        }

        .task-info p, .document-info p, .salary-info p, .attendance-info p {
            font-size: 14px;
            color: #bdc3c7;
        }

        .task-status, .document-type, .salary-amount, .attendance-status {
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }

        .status-pending {
            background-color: rgba(243, 156, 18, 0.2);
            color: var(--warning);
        }

        .status-completed {
            background-color: rgba(46, 204, 113, 0.2);
            color: var(--success);
        }

        .status-approved {
            background-color: rgba(46, 204, 113, 0.2);
            color: var(--success);
        }

        .status-denied {
            background-color: rgba(231, 76, 60, 0.2);
            color: var(--danger);
        }

        .type-pdf {
            background-color: rgba(231, 76, 60, 0.2);
            color: var(--danger);
        }

        .type-doc {
            background-color: rgba(52, 152, 219, 0.2);
            color: var(--secondary);
        }

        /* Security Features */
        .security-badge {
            display: inline-flex;
            align-items: center;
            gap: 5px;
            padding: 5px 10px;
            background-color: rgba(46, 204, 113, 0.2);
            color: var(--success);
            border-radius: 15px;
            font-size: 12px;
            margin-left: 10px;
        }

        .session-timeout {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: rgba(243, 156, 18, 0.9);
            padding: 10px 15px;
            border-radius: 5px;
            display: none;
            z-index: 1000;
        }

        .role-restricted {
            background: rgba(231, 76, 60, 0.1);
            border: 1px solid rgba(231, 76, 60, 0.3);
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            margin: 20px 0;
        }

        .admin-panel {
            background: rgba(52, 152, 219, 0.1);
            border: 1px solid rgba(52, 152, 219, 0.3);
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }

        /* Footer */
        footer {
            background-color: rgba(44, 62, 80, 0.9);
            padding: 20px 0;
            margin-top: 40px;
            text-align: center;
        }

        .security-notice {
            background: rgba(231, 76, 60, 0.1);
            border-left: 4px solid var(--danger);
            padding: 15px;
            margin: 15px 0;
            border-radius: 4px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .demo-credentials {
            background: rgba(52, 152, 219, 0.1);
            border-left: 4px solid var(--secondary);
            padding: 15px;
            margin: 15px 0;
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container header-content">
            <div class="logo">
                <i class="fas fa-shield-alt"></i>
                <h1>SecurePortal</h1>
            </div>
            <nav id="mainNav">
                <ul>
                    <li><a href="#" class="nav-link active" data-section="dashboard"><i class="fas fa-home"></i> Dashboard</a></li>
                    <li><a href="#" class="nav-link" data-section="salary"><i class="fas fa-money-bill"></i> Salary</a></li>
                    <li><a href="#" class="nav-link" data-section="documents"><i class="fas fa-file-alt"></i> Documents</a></li>
                    <li><a href="#" class="nav-link" data-section="attendance"><i class="fas fa-calendar-check"></i> Attendance</a></li>
                    <li><a href="#" class="nav-link admin-only" data-section="admin" style="display: none;"><i class="fas fa-cog"></i> Admin</a></li>
                </ul>
            </nav>
            <div class="user-info">
                <div class="avatar" id="userAvatar">?</div>
                <span id="userName">Not Logged In</span>
                <span class="security-badge" id="securityStatus" style="display: none;"><i class="fas fa-shield-alt"></i> SECURE</span>
                <button class="btn" onclick="logout()" style="width: auto; padding: 8px 15px; margin-left: 10px; display: none;" id="logoutBtn">Logout</button>
            </div>
        </div>
    </header>

    <!-- Login Form -->
    <div class="login-container" id="loginSection">
        <div class="login-box">
            <div class="login-header">
                <h2>Employee Login</h2>
                <p>Secure access to your portal</p>
            </div>
            <form id="loginForm">
                <div class="form-group">
                    <label for="username">Username</label>
                    <input type="text" id="username" class="form-control" placeholder="Enter your username" required>
                </div>
                <div class="form-group">
                    <label for="password">Password</label>
                    <input type="password" id="password" class="form-control" placeholder="Enter your password" required>
                </div>
                
                <!-- MFA Section -->
                <div class="mfa-section" id="mfaSection" style="display: none;">
                    <h3><i class="fas fa-mobile-alt"></i> Multi-Factor Authentication</h3>
                    <p>Scan QR code with Google Authenticator</p>
                    <div class="mfa-qr">
                        <span>SecurePortal MFA Setup</span>
                        <span style="font-size: 12px; margin-top: 10px;">Secret: SECUREPORTAL123</span>
                    </div>
                    <div class="form-group">
                        <label for="otp">Enter OTP Code</label>
                        <input type="text" id="otp" class="form-control" placeholder="6-digit code" maxlength="6" pattern="[0-9]{6}">
                    </div>
                </div>

                <div class="form-group">
                    <button type="submit" class="btn" id="loginBtn">
                        <i class="fas fa-lock"></i> Login to Portal
                    </button>
                </div>
            </form>
            
            <div class="security-notice">
                <i class="fas fa-lock" style="color: var(--danger);"></i>
                <span>Your login is secured with industry-standard encryption and MFA</span>
            </div>

            <!-- Demo Credentials -->
            <div class="demo-credentials">
                <h4><i class="fas fa-info-circle"></i> Demo Access:</h4>
                <p><strong>Admin:</strong> admin / admin123 (MFA: 123456)</p>
                <p><strong>HR:</strong> hr / hr123 (MFA: 123456)</p>
                <p><strong>Employee:</strong> employee / emp123 (No MFA)</p>
            </div>
        </div>
    </div>

    <!-- Dashboard -->
    <div class="dashboard container" id="dashboardSection">
        <!-- Content loaded dynamically -->
    </div>

    <!-- Session Timeout Warning -->
    <div class="session-timeout" id="sessionTimeout">
        <i class="fas fa-clock"></i> Session expires in <span id="timeoutCountdown">5:00</span>
        <button onclick="resetSession()" style="margin-left: 10px; padding: 2px 8px; background: transparent; border: 1px solid white; color: white; border-radius: 3px;">Stay Logged In</button>
    </div>

    <footer>
        <div class="container">
            <p>&copy; 2023 SecurePortal. All rights reserved. | RA 10173 Compliant</p>
            <p>Security Controls: MFA ✅ | RBAC ✅ | Encryption ✅ | Session Timeout ✅</p>
        </div>
    </footer>

    <script>
        // User database with roles and permissions
        const users = {
            'admin': { 
                password: 'admin123', 
                role: 'admin', 
                name: 'System Administrator', 
                mfaEnabled: true,
                department: 'IT',
                email: 'admin@company.com'
            },
            'hr': { 
                password: 'hr123', 
                role: 'hr', 
                name: 'Maria Santos', 
                mfaEnabled: true,
                department: 'Human Resources',
                email: 'hr@company.com'
            },
            'employee': { 
                password: 'emp123', 
                role: 'employee', 
                name: 'John Doe', 
                mfaEnabled: false,
                department: 'Engineering',
                email: 'employee@company.com'
            }
        };

        // Sample data
        const sampleData = {
            tasks: [
                { id: 1, title: 'Complete Q3 Report', dueDate: '2023-10-25', status: 'pending', assignedTo: 'all' },
                { id: 2, title: 'Security Training', dueDate: '2023-10-20', status: 'completed', assignedTo: 'all' },
                { id: 3, title: 'Performance Review', dueDate: '2023-11-05', status: 'pending', assignedTo: 'hr' }
            ],
            documents: [
                { id: 1, title: 'Employee Handbook 2023', type: 'pdf', uploadDate: '2023-09-28', access: 'all' },
                { id: 2, title: 'Benefits Enrollment Form', type: 'doc', uploadDate: '2023-10-01', access: 'all' },
                { id: 3, title: 'Salary Structure Guide', type: 'pdf', uploadDate: '2023-08-15', access: 'hr' }
            ],
            attendance: [
                { date: '2023-10-16', checkIn: '08:05', checkOut: '17:15', status: 'present' },
                { date: '2023-10-15', checkIn: '08:15', checkOut: '17:10', status: 'present' },
                { date: '2023-10-14', checkIn: '08:00', checkOut: '17:00', status: 'present' }
            ],
            salaries: {
                'admin': [
                    { period: 'October 2023', amount: '₱85,000', status: 'Paid', bonus: '₱10,000' },
                    { period: 'September 2023', amount: '₱85,000', status: 'Paid', bonus: '₱8,000' }
                ],
                'hr': [
                    { period: 'October 2023', amount: '₱65,000', status: 'Paid', bonus: '₱7,000' },
                    { period: 'September 2023', amount: '₱65,000', status: 'Paid', bonus: '₱6,000' }
                ],
                'employee': [
                    { period: 'October 2023', amount: '₱45,000', status: 'Paid', bonus: '₱5,000' },
                    { period: 'September 2023', amount: '₱45,000', status: 'Paid', bonus: '₱4,000' }
                ]
            }
        };

        let currentUser = null;
        let sessionTimer = null;
        let timeoutWarning = null;
        let loginAttempts = {};

        // Login functionality
        document.getElementById('loginForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            const mfaSection = document.getElementById('mfaSection');
            const loginBtn = document.getElementById('loginBtn');
            
            // Check for brute force protection
            if (loginAttempts[username] >= 3) {
                alert('Account temporarily locked due to multiple failed attempts. Please try again in 15 minutes.');
                return;
            }
            
            if (users[username] && users[username].password === password) {
                currentUser = users[username];
                
                // Show MFA for users with MFA enabled
                if (currentUser.mfaEnabled) {
                    if (!document.getElementById('otp').value) {
                        mfaSection.style.display = 'block';
                        loginBtn.innerHTML = '<i class="fas fa-shield-alt"></i> Verify OTP & Login';
                        return;
                    }
                    
                    // Verify OTP (simplified for demo - in real system, use proper OTP validation)
                    const otp = document.getElementById('otp').value;
                    if (otp !== '123456') {
                        alert('Invalid OTP code. Please try again.');
                        return;
                    }
                }
                
                // Reset login attempts on successful login
                loginAttempts[username] = 0;
                
                // Complete login
                completeLogin();
            } else {
                // Track failed attempts
                loginAttempts[username] = (loginAttempts[username] || 0) + 1;
                alert(`Invalid username or password. Attempt ${loginAttempts[username]} of 3.`);
            }
        });

        function completeLogin() {
            document.getElementById('loginSection').style.display = 'none';
            document.getElementById('dashboardSection').style.display = 'block';
            document.getElementById('logoutBtn').style.display = 'block';
            document.getElementById('securityStatus').style.display = 'inline-flex';
            
            // Update user info
            document.getElementById('userName').textContent = currentUser.name;
            document.getElementById('userAvatar').textContent = currentUser.name.charAt(0).toUpperCase();
            
            // Start session timeout
            startSessionTimer();
            
            // Load dashboard based on role
            loadDashboard();
            
            // Show/hide admin links based on role
            document.querySelectorAll('.admin-only').forEach(el => {
                el.style.display = currentUser.role === 'admin' ? 'block' : 'none';
            });
        }

        function startSessionTimer() {
            let timeLeft = 300; // 5 minutes in seconds
            
            // Clear existing timers
            if (sessionTimer) clearInterval(sessionTimer);
            if (timeoutWarning) clearTimeout(timeoutWarning);
            
            // Show timeout warning after 4 minutes
            timeoutWarning = setTimeout(() => {
                document.getElementById('sessionTimeout').style.display = 'block';
                updateTimeoutDisplay(timeLeft);
            }, 240000);
            
            // Session timer
            sessionTimer = setInterval(() => {
                timeLeft--;
                updateTimeoutDisplay(timeLeft);
                
                if (timeLeft <= 0) {
                    logout();
                }
            }, 1000);
        }

        function resetSession() {
            document.getElementById('sessionTimeout').style.display = 'none';
            startSessionTimer();
        }

        function updateTimeoutDisplay(seconds) {
            const minutes = Math.floor(seconds / 60);
            const secs = seconds % 60;
            document.getElementById('timeoutCountdown').textContent = 
                `${minutes}:${secs < 10 ? '0' : ''}${secs}`;
        }

        function logout() {
            currentUser = null;
            document.getElementById('loginSection').style.display = 'flex';
            document.getElementById('dashboardSection').style.display = 'none';
            document.getElementById('mfaSection').style.display = 'none';
            document.getElementById('logoutBtn').style.display = 'none';
            document.getElementById('securityStatus').style.display = 'none';
            document.getElementById('loginForm').reset();
            document.getElementById('sessionTimeout').style.display = 'none';
            document.getElementById('userName').textContent = 'Not Logged In';
            document.getElementById('userAvatar').textContent = '?';
            
            if (sessionTimer) clearInterval(sessionTimer);
            if (timeoutWarning) clearTimeout(timeoutWarning);
        }

        function loadDashboard(section = 'dashboard') {
            const dashboard = document.getElementById('dashboardSection');
            let content = '';

            // Update active nav
            document.querySelectorAll('.nav-link').forEach(link => link.classList.remove('active'));
            document.querySelector(`[data-section="${section}"]`).classList.add('active');

            if (section === 'dashboard') {
                content = `
                    <div class="welcome-banner">
                        <div class="welcome-text">
                            <h2>Welcome back, ${currentUser.name}!</h2>
                            <p>Role: ${currentUser.role.toUpperCase()} | Department: ${currentUser.department} | MFA: ${currentUser.mfaEnabled ? 'Enabled ✅' : 'Disabled'}</p>
                            <p><small>Last login: ${new Date().toLocaleString()}</small></p>
                        </div>
                    </div>

                    <div class="stats-cards">
                        <div class="stat-card">
                            <i class="fas fa-tasks"></i>
                            <h3>PENDING TASKS</h3>
                            <div class="value">${sampleData.tasks.filter(t => t.status === 'pending' && (t.assignedTo === 'all' || t.assignedTo === currentUser.role)).length}</div>
                        </div>
                        <div class="stat-card">
                            <i class="fas fa-file-alt"></i>
                            <h3>DOCUMENTS</h3>
                            <div class="value">${sampleData.documents.filter(d => d.access === 'all' || d.access === currentUser.role).length}</div>
                        </div>
                        <div class="stat-card">
                            <i class="fas fa-calendar-check"></i>
                            <h3>THIS MONTH HOURS</h3>
                            <div class="value">160</div>
                        </div>
                        <div class="stat-card">
                            <i class="fas fa-money-bill"></i>
                            <h3>NEXT PAYROLL</h3>
                            <div class="value">5 days</div>
                        </div>
                    </div>

                    <div class="dashboard-section">
                        <div class="section-header">
                            <h2><i class="fas fa-tasks"></i> Recent Tasks</h2>
                        </div>
                        <div class="tasks-list">
                            ${sampleData.tasks
                                .filter(task => task.assignedTo === 'all' || task.assignedTo === currentUser.role)
                                .map(task => `
                                <div class="task-item">
                                    <div class="task-info">
                                        <h4>${task.title}</h4>
                                        <p>Due: ${task.dueDate}</p>
                                    </div>
                                    <div class="task-status status-${task.status}">${task.status.charAt(0).toUpperCase() + task.status.slice(1)}</div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
            } else if (section === 'salary') {
                const salaryRecords = sampleData.salaries[currentUser.role] || [];
                content = `
                    <div class="welcome-banner">
                        <div class="welcome-text">
                            <h2><i class="fas fa-money-bill"></i> Salary Information</h2>
                            <p>View your salary history and payment details</p>
                        </div>
                    </div>

                    <div class="dashboard-section">
                        <div class="section-header">
                            <h2>Salary Records</h2>
                            <span class="security-badge"><i class="fas fa-lock"></i> Encrypted</span>
                        </div>
                        <div class="salary-list">
                            ${salaryRecords.map(item => `
                                <div class="salary-item">
                                    <div class="salary-info">
                                        <h4>${item.period}</h4>
                                        <p>Status: ${item.status} | Bonus: ${item.bonus}</p>
                                    </div>
                                    <div class="salary-amount">${item.amount}</div>
                                </div>
                            `).join('')}
                        </div>
                    </div>

                    ${currentUser.role === 'admin' ? `
                    <div class="admin-panel">
                        <h3><i class="fas fa-users-cog"></i> Admin Salary Management</h3>
                        <p>Access to all employee salary records and payroll processing.</p>
                        <button class="btn btn-success" style="width: auto; margin-top: 10px;">
                            <i class="fas fa-cog"></i> Manage Payroll
                        </button>
                    </div>
                    ` : ''}
                `;
            } else if (section === 'documents') {
                content = `
                    <div class="welcome-banner">
                        <div class="welcome-text">
                            <h2><i class="fas fa-file-alt"></i> Company Documents</h2>
                            <p>Access important company documents and resources</p>
                        </div>
                    </div>

                    <div class="dashboard-section">
                        <div class="section-header">
                            <h2>Available Documents</h2>
                        </div>
                        <div class="documents-list">
                            ${sampleData.documents
                                .filter(doc => doc.access === 'all' || doc.access === currentUser.role)
                                .map(doc => `
                                <div class="document-item">
                                    <div class="document-info">
                                        <h4>${doc.title}</h4>
                                        <p>Uploaded: ${doc.uploadDate}</p>
                                    </div>
                                    <div class="document-type type-${doc.type}">${doc.type.toUpperCase()}</div>
                                </div>
                            `).join('')}
                        </div>
                    </div>

                    ${currentUser.role === 'hr' || currentUser.role === 'admin' ? `
                    <div class="admin-panel">
                        <h3><i class="fas fa-upload"></i> HR Document Management</h3>
                        <p>Upload and manage company documents.</p>
                        <button class="btn btn-success" style="width: auto; margin-top: 10px;">
                            <i class="fas fa-upload"></i> Upload New Document
                        </button>
                    </div>
                    ` : ''}
                `;
            } else if (section === 'attendance') {
                content = `
                    <div class="welcome-banner">
                        <div class="welcome-text">
                            <h2><i class="fas fa-calendar-check"></i> Attendance Tracking</h2>
                            <p>View your attendance records and time tracking</p>
                        </div>
                    </div>

                    <div class="dashboard-section">
                        <div class="section-header">
                            <h2>Recent Attendance</h2>
                            <button class="btn" style="width: auto;">
                                <i class="fas fa-clock"></i> Check In/Out
                            </button>
                        </div>
                        <div class="attendance-list">
                            ${sampleData.attendance.map(record => `
                                <div class="attendance-item">
                                    <div class="attendance-info">
                                        <h4>${record.date}</h4>
                                        <p>${record.checkIn} - ${record.checkOut}</p>
                                    </div>
                                    <div class="attendance-status status-${record.status}">${record.status.charAt(0).toUpperCase() + record.status.slice(1)}</div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
            } else if (section === 'admin' && currentUser.role === 'admin') {
                content = `
                    <div class="welcome-banner">
                        <div class="welcome-text">
                            <h2><i class="fas fa-cog"></i> System Administration</h2>
                            <p>Manage system settings and user accounts</p>
                        </div>
                    </div>

                    <div class="admin-panel">
                        <h3><i class="fas fa-users"></i> User Management</h3>
                        <div class="stats-cards">
                            <div class="stat-card">
                                <i class="fas fa-user"></i>
                                <h3>TOTAL USERS</h3>
                                <div class="value">${Object.keys(users).length}</div>
                            </div>
                            <div class="stat-card">
                                <i class="fas fa-shield-alt"></i>
                                <h3>MFA ENABLED</h3>
                                <div class="value">${Object.values(users).filter(u => u.mfaEnabled).length}</div>
                            </div>
                            <div class="stat-card">
                                <i class="fas fa-clock"></i>
                                <h3>ACTIVE SESSIONS</h3>
                                <div class="value">1</div>
                            </div>
                        </div>

                        <div style="margin-top: 20px;">
                            <button class="btn" style="width: auto; margin-right: 10px;">
                                <i class="fas fa-plus"></i> Add User
                            </button>
                            <button class="btn btn-success" style="width: auto; margin-right: 10px;">
                                <i class="fas fa-sync"></i> System Health
                            </button>
                            <button class="btn" style="width: auto;">
                                <i class="fas fa-file-alt"></i> Audit Logs
                            </button>
                        </div>
                    </div>

                    <div class="dashboard-section">
                        <div class="section-header">
                            <h2><i class="fas fa-history"></i> Recent Security Events</h2>
                        </div>
                        <div class="tasks-list">
                            <div class="task-item">
                                <div class="task-info">
                                    <h4>User Login - ${currentUser.name}</h4>
                                    <p>${new Date().toLocaleString()} | IP: 192.168.1.100</p>
                                </div>
                                <div class="task-status status-completed">Success</div>
                            </div>
                            <div class="task-item">
                                <div class="task-info">
                                    <h4>MFA Verification</h4>
                                    <p>${new Date().toLocaleString()} | Method: Google Authenticator</p>
                                </div>
                                <div class="task-status status-completed">Verified</div>
                            </div>
                        </div>
                    </div>
                `;
            }

            dashboard.innerHTML = content;
        }

        // Navigation
        document.addEventListener('click', function(e) {
            if (e.target.classList.contains('nav-link')) {
                e.preventDefault();
                const section = e.target.getAttribute('data-section');
                
                // RBAC check for admin section
                if (section === 'admin' && currentUser.role !== 'admin') {
                    alert('Access denied. Administrator privileges required.');
                    return;
                }
                
                loadDashboard(section);
            }
        });

        // Auto-logout on inactivity
        let activityTimer;
        function resetActivityTimer() {
            clearTimeout(activityTimer);
            activityTimer = setTimeout(() => {
                alert('Session expired due to inactivity.');
                logout();
            }, 300000); // 5 minutes
        }

        document.addEventListener('mousemove', resetActivityTimer);
        document.addEventListener('keypress', resetActivityTimer);
        document.addEventListener('click', resetActivityTimer);
        resetActivityTimer();

        // Initialize
        resetActivityTimer();
    </script>
</body>
</html>